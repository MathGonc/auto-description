<script>
async function buscar() {
  const termo = document.getElementById("produto").value;
  const resultado = document.getElementById("resultado");

  if (!termo) {
    resultado.innerText = "Digite algo";
    return;
  }

  resultado.innerText = "Buscando...";

  try {
    const proxy = "https://api.allorigins.win/raw?url=";

    const busca = await fetch(
      proxy + encodeURIComponent(
        `https://api.mercadolibre.com/sites/MLB/search?q=${termo}`
      )
    );
    const dados = await busca.json();

    if (!dados.results || !dados.results.length) {
      resultado.innerText = "Nenhum resultado encontrado";
      return;
    }

    const id = dados.results[0].id;

    const desc = await fetch(
      proxy + encodeURIComponent(
        `https://api.mercadolibre.com/items/${id}/description`
      )
    );
    const d = await desc.json();

    resultado.innerText =
      d.plain_text || "Descrição não disponível";

  } catch (e) {
    resultado.innerText = "Erro ao buscar dados";
    console.error(e);
  }
}
</script>
